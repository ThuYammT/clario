<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="view_ocr_invoice_form" model="ir.ui.view">
        <field name="name">ocr.invoice.form</field>
        <field name="model">ocr.document</field>
        <field name="arch" type="xml">

            <form string="Invoice Upload" edit="true">

                <sheet>

                    <!-- ===== HEADER ===== -->
                    <separator string="Invoice Upload"
                               style="font-size:20px; font-weight:600; color:#3c8dbc;"
                    />

                    <!-- ===== FILE UPLOAD SECTION ===== -->
                    <group string="Invoice File" col="2" class="o_inner_group">
                        <field name="name"/>
                        <field name="document_type" invisible="1"/>
                        <field name="file" filename="filename"/>
                        <field name="filename" invisible="1"/>
                    </group>

                    <separator string="Extracted Data" style="margin-top:20px;"/>

                    <!-- ===== EXTRACTED FIELDS ===== -->
                    <group col="2">
                        <group string="Vendor Information" class="o_inner_group">
                            <field name="vendor_name"/>
                            <field name="invoice_date"/>
                        </group>

                        <group string="Amounts" class="o_inner_group">
                            <field name="total_amount"/>
                            <field name="vat_amount"/>
                            <field name="confidence_score" readonly="1"/>
                        </group>
                    </group>

                    <separator string="OCR Output" style="margin-top:20px;"/>

                    <!-- ===== OCR RAW TEXT ===== -->
                    <group col="1">
                        <field name="extracted_text"
                               readonly="1"
                               placeholder="OCR text will appear here..."/>
                        <field name="extraction_log"
                               readonly="1"
                               placeholder="Any parsing errors will appear here..."/>
                    </group>

                </sheet>

                <!-- ===== ACTION BUTTONS (MUST BE OUTSIDE SHEET) ===== -->
                <footer>
                    <button string="Run OCR"
                            type="object"
                            name="action_run_ocr"
                            class="btn-primary"/>

                    <button string="Preview &amp; Confirm"
                            type="action"
                            name="%(action_ocr_preview_wizard)d"
                            class="btn-secondary"/>

                    <button string="Cancel"
                            special="cancel"/>
                </footer>

            </form>

        </field>
    </record>
</odoo>
